from fastapi import Depends
from sqlalchemy.orm import Session

from app.models.all_models import ModelsDB
from app.core.db import get_db


class ModelRepository:
    def __init__(self, db: Session) -> None:
        self.db = db

    def get_model_by_name(self, name: str) -> ModelsDB:
        model = self.db.query(ModelsDB).filter_by(name=name).first()

        return model


# Возвращаем репозиторий моделей
def get_model_repository(
    db: Session = Depends(get_db),
) -> ModelRepository:
    model_repository = ModelRepository(db)
    return model_repository
